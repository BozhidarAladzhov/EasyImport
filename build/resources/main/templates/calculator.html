<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>–ö–∞–ª–∫—É–ª–∞—Ç–æ—Ä</title>
    <link rel="icon" type="image/png" href="/images/favicon.png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/site.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tom-select/dist/css/tom-select.bootstrap5.min.css">
</head>

<script>
    document.addEventListener('DOMContentLoaded', function () {
      const hybrid   = document.getElementById('hybrid');
      const electric = document.getElementById('electric');

      function enforceExclusive(e) {
        if (!e.target.checked) return;
        if (e.target === hybrid && electric)  electric.checked = false;
        if (e.target === electric && hybrid)  hybrid.checked = false;
      }

      hybrid?.addEventListener('change', enforceExclusive);
      electric?.addEventListener('change', enforceExclusive);
    });
</script>


<body>

<nav class="navbar navbar-expand-lg">
    <div class="container">
        <a class="navbar-brand" th:href="@{/}"><img src="/images/logo.png" alt="">–ë–æ–∂–∏–¥–∞—Ä –ê–ª–∞–¥–∂–æ–≤</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item"><a class="nav-link" th:href="@{/}">–ù–∞—á–∞–ª–æ</a></li>
                <li class="nav-item"><a class="nav-link" th:href="@{/about}">–ó–∞ –º–µ–Ω</a></li>
                <li class="nav-item"><a class="nav-link" th:href="@{/prices}">–¶–µ–Ω–∏</a></li>
                <li class="nav-item"><a class="nav-link active" th:href="@{/calculator}">–ö–∞–ª–∫—É–ª–∞—Ç–æ—Ä</a></li>
                <li class="nav-item"><a class="nav-link" th:href="@{/contact}">–ö–æ–Ω—Ç–∞–∫—Ç–∏</a></li>
            </ul>
        </div>
    </div>
</nav>

<header class="hero hero--gradient">
    <div class="container">
        <h2 class="fw-bold">üìü –ö–∞–ª–∫—É–ª–∞—Ç–æ—Ä</h2>
        <p class="text-muted-ux">–ò–∑—á–∏—Å–ª–∏ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–∏ —Ä–∞–∑—Ö–æ–¥–∏ –∏ –º–∏—Ç–Ω–∏—á–µ—Å–∫–∏ –∑–∞–¥—ä–ª–∂–µ–Ω–∏—è.</p>
    </div>
</header>

<section class="section">
    <div class="container">

        <!-- –§–æ—Ä–º–∞ -->
        <form th:action="@{/calculator#results}" th:object="${request}" method="post" class="row g-3 form-shell needs-validation" novalidate>
            <div class="col-md-6">
                <label for="originPort" class="form-label"><span class="highlight">–¢–æ–≤–∞—Ä–Ω–æ –ø—Ä–∏—Å—Ç–∞–Ω–∏—â–µ</span></label>
                <select id="originPort" th:field="*{originPort}" class="form-select" required>
                    <option value="">–ò–∑–±–µ—Ä–∏...</option>
                    <option value="New York">New York</option>
                    <option value="Savannah">Savannah</option>
                    <option value="Miami">Miami</option>
                    <option value="Indianapolis">Indianapolis</option>
                    <option value="Houston">Houston</option>
                    <option value="Los Angeles">Los Angeles</option>
                    <option value="San Francisco">San Francisco</option>
                </select>
                <div class="invalid-feedback">–ú–æ–ª—è, –∏–∑–±–µ—Ä–µ—Ç–µ –Ω–∞—á–∞–ª–Ω–æ –ø—Ä–∏—Å—Ç–∞–Ω–∏—â–µ.</div>
            </div>

            <div class="col-md-6">
                <label for="destinationPort" class="form-label"><span class="highlight">–†–∞–∑—Ç–æ–≤–∞—Ä–Ω–æ –ø—Ä–∏—Å—Ç–∞–Ω–∏—â–µ</span></label>
                <select id="destinationPort" th:field="*{destinationPort}" class="form-select" required>
                    <option value="">–ò–∑–±–µ—Ä–∏...</option>
                    <option value="Rotterdam">Rotterdam</option>
                    <option value="Varna">Varna</option>
                </select>
                <div class="invalid-feedback">–ú–æ–ª—è, –∏–∑–±–µ—Ä–µ—Ç–µ –¥–µ—Å—Ç–∏–Ω–∞—Ü–∏—è.</div>
            </div>

            <div class="col-md-6">
                <label for="vehicleType" class="form-label"><span class="highlight">–¢–∏–ø –Ω–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª–∞</span></label>
                <select id="vehicleType" th:field="*{vehicleType}" class="form-select" required>
                    <option value="">–ò–∑–±–µ—Ä–∏...</option>
                    <option value="CAR">CAR</option>
                    <option value="SUV">SUV</option>
                    <option value="Large SUV">Large SUV</option>
                    <option value="PICKUP">PICKUP</option>
                    <option value="Motorcycle">Motorcycle</option>
                </select>
                <div class="invalid-feedback">–ú–æ–ª—è, –∏–∑–±–µ—Ä–µ—Ç–µ —Ç–∏–ø –Ω–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª–∞.</div>
            </div>

            <div class="col-md-3 d-flex align-items-center">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" th:field="*{hybrid}" id="hybrid">
                    <label class="form-check-label" for="hybrid">‚ò¢Ô∏è –•–∏–±—Ä–∏–¥</label>
                </div>
            </div>
            <div class="col-md-3 d-flex align-items-center">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" th:field="*{electric}" id="electric">
                    <label class="form-check-label" for="electric">‚ò¢Ô∏è –ï–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏</label>
                </div>
            </div>

            <div class="col-md-6">
                <label for="price" class="form-label"><span class="highlight">–¶–µ–Ω–∞ –Ω–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª–∞ (USD)</span></label>
                <input type="number" id="price" th:field="*{price}" class="form-control" placeholder="–í—ä–≤–µ–¥–µ—Ç–µ —á–∏—Å–ª–æ–≤–∞ —Å—Ç–æ–π–Ω–æ—Å—Ç" required>
                <div class="invalid-feedback">–ú–æ–ª—è, –≤—ä–≤–µ–¥–µ—Ç–µ —Ü–µ–Ω–∞.</div>
            </div>

            <div class="col-12 mt-2">
                <button type="submit" class="btn w-100">–ò–∑—á–∏—Å–ª–∏ —Ü–µ–Ω–∞</button>
            </div>
        </form>

        <!-- –†–µ–∑—É–ª—Ç–∞—Ç–∏ -->
        <div id="results" class="row mt-5">
            <div class="col-md-6">
                <h5 class="mb-3">üöö –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–∏ —Ä–∞–∑—Ö–æ–¥–∏</h5>

                <div class="alert alert-danger" th:if="${result == -1}">
                    –ù—è–º–∞ –Ω–∞–º–µ—Ä–µ–Ω–∞ —Ü–µ–Ω–∞ –∑–∞ –∑–∞–¥–∞–¥–µ–Ω–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏.
                </div>

                <div class="alert alert-success" th:if="${oceanFreight != null and oceanFreight != -1}">
                    –ú–æ—Ä—Å–∫–∏ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç: <strong th:text="${#numbers.formatDecimal(oceanFreight, 2, 2)}">0.00</strong> USD
                </div>

                <div class="alert alert-success"
                     th:if="${terminalHandling != null and terminalHandling != -1 and request.destinationPort == 'Rotterdam'}">
                    –¢–µ—Ä–º–∏–Ω–∞–ª–Ω–∏ —Ä–∞–∑—Ö–æ–¥–∏ –≤ –†–æ—Ç–µ—Ä–¥–∞–º:
                    <strong th:text="${#numbers.formatDecimal(terminalHandling, 2, 2)}">0.00</strong> EUR
                </div>

                <div class="alert alert-success"
                     th:if="${terminalHandling != null and terminalHandling != -1 and request.destinationPort == 'Varna'}">
                    –¢–µ—Ä–º–∏–Ω–∞–ª–Ω–∏ —Ä–∞–∑—Ö–æ–¥–∏ –≤—ä–≤ –í–∞—Ä–Ω–∞:
                    <strong th:text="${#numbers.formatDecimal(terminalHandling, 2, 2)}">0.00</strong> BGN
                </div>

                <div class="alert alert-success"
                     th:if="${domesticRotterdam != null && domesticRotterdam != -1 && request.destinationPort == 'Rotterdam'}">
                    –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç –æ—Ç –†–æ—Ç–µ—Ä–¥–∞–º –¥–æ –°–æ—Ñ–∏—è:
                    <strong th:text="${#numbers.formatDecimal(domesticRotterdam, 2, 2)}">0.00</strong> BGN
                </div>
            </div>

            <div class="col-md-6">
                <h5 class="mb-3">üí∞ –ú–∏—Ç–Ω–∏—á–µ—Å–∫–∏ –∑–∞–¥—ä–ª–∂–µ–Ω–∏—è</h5>

                <div class="alert alert-success"
                     th:if="${terminalHandling != null and terminalHandling != -1 and request.destinationPort == 'Rotterdam'}">
                    –ú–∏—Ç–æ 10% : <strong th:text="${#numbers.formatDecimal(vehicleTAX, 2, 2)}">0.00</strong> USD
                </div>
                <div class="alert alert-success"
                     th:if="${terminalHandling != null and terminalHandling != -1 and request.destinationPort == 'Rotterdam'}">
                    –î–î–° 21% : <strong th:text="${#numbers.formatDecimal(calculateVATNetherlands, 2, 2)}">0.00</strong> USD
                </div>

                <div class="alert alert-success"
                     th:if="${terminalHandling != null and terminalHandling != -1 and request.destinationPort == 'Varna'}">
                    –ú–∏—Ç–æ 10% : <strong th:text="${#numbers.formatDecimal(vehicleTAX, 2, 2)}">0.00</strong> USD
                </div>
                <div class="alert alert-success"
                     th:if="${terminalHandling != null and terminalHandling != -1 and request.destinationPort == 'Varna'}">
                    –î–î–° 20% : <strong th:text="${#numbers.formatDecimal(calculateVATBulgaria, 2, 2)}">0.00</strong> USD
                </div>
            </div>
        </div>

        <div class="alert alert-warning mt-4" th:if="${oceanFreight != null and oceanFreight != -1}">
            <strong>‚ö†Ô∏è –í–∞–∂–Ω–æ:</strong> –ú–∏—Ç–Ω–∏—á–µ—Å–∫–∏—Ç–µ –∑–∞–¥—ä–ª–∂–µ–Ω–∏—è —Å–µ –∏–∑—á–∏—Å–ª—è–≤–∞—Ç –ø–æ –º–∏—Ç–Ω–∏—á–µ—Å–∫–∏ –≤–∞–ª—É—Ç–µ–Ω –∫—É—Ä—Å. –ö–∞–ª–∫—É–ª–∞—Ç–æ—Ä—ä—Ç –¥–∞–≤–∞ –æ—Ä–∏–µ–Ω—Ç–∏—Ä.
        </div>
        <div class="alert alert-warning mt-3" th:if="${oceanFreight != null and oceanFreight != -1}">
            <strong>‚ö†Ô∏è –í–∞–∂–Ω–æ:</strong> –í—Å–∏—á–∫–∏ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–∏ —Ä–∞–∑—Ö–æ–¥–∏ —Å–∞ –±–µ–∑ –≤–∫–ª—é—á–µ–Ω–æ –î–î–°.
        </div>

    </div>
</section>

<section id="contact" class="section">
    <div class="container text-center">
        <h2 class="fw-bold mb-4">–°–≤—ä—Ä–∂–∏ —Å–µ —Å –º–µ–Ω</h2>
        <p class="fs-5 mb-2">üì¨ –ò–º–µ–π–ª: <a href="mailto:easyimport.bg@gmail.com" class="link fw-semibold">easyimport.bg@gmail.com</a></p>
        <p class="fs-5">üí¨ Discord: <a href="https://discord.gg/bSJEBTvAe9" target="_blank" class="link fw-semibold">discord.gg/bSJEBTvAe9</a></p>
    </div>
</section>

<footer class="site-footer">
    <div class="container text-center py-3 small">¬© 2025 EasyImport ‚Äì –í—Å–∏—á–∫–∏ –ø—Ä–∞–≤–∞ –∑–∞–ø–∞–∑–µ–Ω–∏.</div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/tom-select/dist/js/tom-select.complete.min.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function(){
      if(document.getElementById('originPort')) new TomSelect('#originPort', { create:false, sortField:{field:'text',direction:'asc'} });
      if(document.getElementById('destinationPort')) new TomSelect('#destinationPort', { create:false, sortField:{field:'text',direction:'asc'} });
      if(document.getElementById('vehicleType')) new TomSelect('#vehicleType', { create:false, sortField:{field:'text',direction:'asc'} });

      // Bootstrap validation
      const forms = document.querySelectorAll('.needs-validation');
      Array.prototype.slice.call(forms).forEach(function (form) {
        form.addEventListener('submit', function (event) {
          if (!form.checkValidity()) { event.preventDefault(); event.stopPropagation(); }
          form.classList.add('was-validated');
        }, false);
      });
    });
</script>
</body>
</html>
