<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>–ê–∫—Ç—É–∞–ª–Ω–∏ —Ü–µ–Ω–∏</title>
    <link rel="icon" type="image/png" href="/images/favicon.png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/site.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tom-select/dist/css/tom-select.bootstrap5.min.css">
</head>

<script>
    document.addEventListener('DOMContentLoaded', function () {
      document.querySelectorAll('.table tbody').forEach(function (tbody) {
        const rows = Array.from(tbody.querySelectorAll('tr'))
          .filter(r => r.querySelectorAll('td').length);

        let prevPort = null, currentGroup = [];

        function closeGroup() {
          if (!currentGroup.length) return;
          currentGroup.forEach(r => r.classList.add('port-group'));
          currentGroup[0].classList.add('port-group-start');
          currentGroup[currentGroup.length - 1].classList.add('port-group-end');
          currentGroup = [];
        }

        rows.forEach(function (row, i) {
          const portCell = row.cells[0];
          const port = (portCell?.textContent || '').trim();
          if (port !== prevPort) closeGroup();
          currentGroup.push(row);
          prevPort = port;
        });

        closeGroup(); // –∑–∞—Ç–≤–∞—Ä—è–º–µ –ø–æ—Å–ª–µ–¥–Ω–∞—Ç–∞ –≥—Ä—É–ø–∞
      });
    });
</script>


<body>

<nav class="navbar navbar-expand-lg">
    <div class="container">
        <a class="navbar-brand" th:href="@{/}"><img src="/images/logo.png" alt="">–ë–æ–∂–∏–¥–∞—Ä –ê–ª–∞–¥–∂–æ–≤</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item"><a class="nav-link" th:href="@{/}">–ù–∞—á–∞–ª–æ</a></li>
                <li class="nav-item"><a class="nav-link" th:href="@{/about}">–ó–∞ –º–µ–Ω</a></li>
                <li class="nav-item"><a class="nav-link active" th:href="@{/prices}">–¶–µ–Ω–∏</a></li>
                <li class="nav-item"><a class="nav-link" th:href="@{/calculator}">–ö–∞–ª–∫—É–ª–∞—Ç–æ—Ä</a></li>
                <li class="nav-item"><a class="nav-link" th:href="@{/process}">–ü—Ä–æ—Ü–µ—Å</a></li>
                <li class="nav-item"><a class="nav-link" th:href="@{/contact}">–ö–æ–Ω—Ç–∞–∫—Ç–∏</a></li>
            </ul>
        </div>
    </div>
</nav>

<header class="hero hero--gradient">
    <div class="container">
        <h2 class="fw-bold">üìâ –ê–∫—Ç—É–∞–ª–Ω–∏ —Ü–µ–Ω–∏ –∑–∞ –º–æ—Ä—Å–∫–∏ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç</h2>
        <p class="text-muted-ux">–§–∏–ª—Ç—Ä–∏—Ä–∞–π –ø–æ –ø—Ä–∏—Å—Ç–∞–Ω–∏—â–∞ –∏ –≤–∏–∂ –∞–∫—Ç—É–∞–ª–Ω–∏—Ç–µ —Ç–∞—Ä–∏—Ñ–∏ –ø–æ –¥–µ—Å—Ç–∏–Ω–∞—Ü–∏–∏.</p>
    </div>
</header>

<section class="section">
    <div class="container">

        <!-- –§–∏–ª—Ç—Ä–∏ -->
        <form class="row g-3 mb-4 form-shell" th:action="@{/prices}" method="get">
            <div class="col-md-4">
                <label for="originPort" class="form-label"><span class="highlight">–¢–æ–≤–∞—Ä–Ω–æ –ø—Ä–∏—Å—Ç–∞–Ω–∏—â–µ</span></label>
                <select id="originPort" name="originPort" class="form-select">
                    <option value="">–í—Å–∏—á–∫–∏</option>
                    <option th:each="port : ${originPortList}"
                            th:value="${port}"
                            th:text="${port}"
                            th:selected="${port == selectedOriginPort}"></option>
                </select>
            </div>

            <div class="col-md-4">
                <label for="portFilter" class="form-label"><span class="highlight">–†–∞–∑—Ç–æ–≤–∞—Ä–Ω–æ –ø—Ä–∏—Å—Ç–∞–Ω–∏—â–µ</span></label>
                <select id="portFilter" name="port" class="form-select">
                    <option value="">–í—Å–∏—á–∫–∏</option>
                    <option value="Varna" th:selected="${selectedPort == 'Varna'}">Varna</option>
                    <option value="Rotterdam" th:selected="${selectedPort == 'Rotterdam'}">Rotterdam</option>
                </select>
            </div>

            <div class="col-md-2 d-flex align-items-end">
                <button type="submit" class="btn w-100">–ü—Ä–∏–ª–æ–∂–∏</button>
            </div>
            <div class="col-md-2 d-flex align-items-end">
                <a th:href="@{/prices}" class="btn btn-outline w-100">–ò–∑—á–∏—Å—Ç–∏</a>
            </div>
        </form>

        <!-- –†–µ–∑—É–ª—Ç–∞—Ç–∏ -->
        <div class="row" th:if="${selectedOriginPort != null or selectedPort != null}">
            <!-- –î–æ –í–∞—Ä–Ω–∞ -->
            <div class="col-md-6 mb-4">
                <div class="card h-100">
                    <div class="card-header bg-transparent border-0 px-3 pb-0">
                        <h4 class="card-title m-0">–î–æ –í–∞—Ä–Ω–∞</h4>
                    </div>
                    <div class="card-body p-0">
                        <div class="table-responsive">
                            <table class="table table-hover mb-0">
                                <thead>
                                <tr>
                                    <th>–û—Ç –ø—Ä–∏—Å—Ç–∞–Ω–∏—â–µ</th>
                                    <th>–í–∏–¥ –∞–≤—Ç–æ–º–æ–±–∏–ª</th>
                                    <th>–¶–µ–Ω–∞ (USD)</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr th:each="price : ${pricesToVarna}">
                                    <td th:text="${price.originPort}">-</td>
                                    <td th:text="${price.vehicleType}">-</td>
                                    <td th:text="${#numbers.formatDecimal(price.price, 2, 2)}">0.00</td>
                                </tr>
                                <tr th:if="${#lists.isEmpty(pricesToVarna)}">
                                    <td colspan="3" class="text-muted">–ù—è–º–∞ –¥–∞–Ω–Ω–∏ –∑–∞ –ø–æ–∫–∞–∑–≤–∞–Ω–µ.</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –î–æ –†–æ—Ç–µ—Ä–¥–∞–º -->
            <div class="col-md-6 mb-4">
                <div class="card h-100">
                    <div class="card-header bg-transparent border-0 px-3 pb-0">
                        <h4 class="card-title m-0">–î–æ –†–æ—Ç–µ—Ä–¥–∞–º</h4>
                    </div>
                    <div class="card-body p-0">
                        <div class="table-responsive">
                            <table class="table table-hover mb-0">
                                <thead>
                                <tr>
                                    <th>–û—Ç –ø—Ä–∏—Å—Ç–∞–Ω–∏—â–µ</th>
                                    <th>–í–∏–¥ –∞–≤—Ç–æ–º–æ–±–∏–ª</th>
                                    <th>–¶–µ–Ω–∞ (USD)</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr th:each="price : ${pricesToRotterdam}">
                                    <td th:text="${price.originPort}">-</td>
                                    <td th:text="${price.vehicleType}">-</td>
                                    <td th:text="${#numbers.formatDecimal(price.price, 2, 2)}">0.00</td>
                                </tr>
                                <tr th:if="${#lists.isEmpty(pricesToRotterdam)}">
                                    <td colspan="3" class="text-muted">–ù—è–º–∞ –¥–∞–Ω–Ω–∏ –∑–∞ –ø–æ–∫–∞–∑–≤–∞–Ω–µ.</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

        </div><!-- /row -->
    </div>
</section>

<section id="contact" class="section">
    <div class="container text-center">
        <h2 class="fw-bold mb-4">–°–≤—ä—Ä–∂–∏ —Å–µ —Å –º–µ–Ω</h2>
        <p class="fs-5 mb-2">üì¨ –ò–º–µ–π–ª: <a href="mailto:easyimport.bg@gmail.com" class="link fw-semibold">easyimport.bg@gmail.com</a></p>
        <p class="fs-5">üí¨ Discord: <a href="https://discord.gg/bSJEBTvAe9" target="_blank" class="link fw-semibold">discord.gg/bSJEBTvAe9</a></p>
    </div>
</section>
<footer class="site-footer">
    <div class="container text-center py-3 small">¬© 2025 EasyImport ‚Äì –í—Å–∏—á–∫–∏ –ø—Ä–∞–≤–∞ –∑–∞–ø–∞–∑–µ–Ω–∏.</div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/tom-select/dist/js/tom-select.complete.min.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function(){
      if(document.getElementById('originPort')) new TomSelect('#originPort', { create:false, sortField:{field:'text', direction:'asc'} });
      if(document.getElementById('portFilter')) new TomSelect('#portFilter', { create:false, sortField:{field:'text', direction:'asc'} });
    });
</script>
</body>
</html>
