﻿<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1" name="viewport"/>
    <title>Калкулатор</title>
    <link href="/images/favicon-site.png" rel="icon" type="image/png"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&amp;display=swap" rel="stylesheet"/>
    <link href="/css/site.css" rel="stylesheet"/>
    <link href="/css/calculator.css" rel="stylesheet"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet"/>
    <link href="https://cdn.jsdelivr.net/npm/tom-select/dist/css/tom-select.bootstrap5.min.css" rel="stylesheet"/>
</head>
<script>
         document.addEventListener('DOMContentLoaded', function () {       const hybrid   = document.getElementById('hybrid');       const electric = document.getElementById('electric');        function enforceExclusive(e) {         if (!e.target.checked) return;         if (e.target === hybrid && electric)  electric.checked = false;         if (e.target === electric && hybrid)  hybrid.checked = false;       }        hybrid?.addEventListener('change', enforceExclusive);       electric?.addEventListener('change', enforceExclusive);     });
</script>
<body class="page-calculator">
<nav class="navbar navbar-expand-lg">
    <div class="container-fluid px-4"><a class="navbar-brand" th:href="@{/}">
        <div class="navbar-logo-wrapper"><img alt="Лого" class="navbar-logo" src="/images/Logo Bozhidar Aladzhov.svg"/>
        </div>
    </a>
        <button class="navbar-toggler" data-bs-target="#navbarNav" data-bs-toggle="collapse" type="button"><span
                class="navbar-toggler-icon"></span></button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item"><a class="nav-link" th:href="@{/}">Начало</a></li>
                <li class="nav-item"><a class="nav-link" th:href="@{/about}">За мен</a></li>
                <li class="nav-item"><a class="nav-link" th:href="@{/prices}">Цени</a></li>
                <li class="nav-item"><a class="nav-link active" th:href="@{/calculator}">Калкулатор</a></li>
                <li class="nav-item"><a class="nav-link" th:href="@{/process}">Процеси</a></li>
                <li class="nav-item"><a class="nav-link" th:href="@{/contact}">Контакти</a></li>
            </ul>
        </div>
    </div>
</nav>
<header class="hero hero--gradient">
    <div class="container hero-intro"><h2 class="fw-bold"><span class="highlight">Калкулатор</span></h2>
        <!--        <p class="fs-6 text-center">Позволява ти да изчислиш транспортните разходи и митническите задължения.</p>-->
    </div>
</header>
<section class="section">
    <div class="container"><p class="fs-6">Попълни необходимата информация, за да изчислиш транспортните разходи и
        митническите задължения.</p>         <!-- Форма -->
        <form class="row g-3 form-shell needs-validation hover-glow" method="post" novalidate=""
              th:action="@{/calculator#results}" th:object="${request}">
            <div class="col-md-6"><label class="form-label" for="originPort"><span
                    class="highlight">Товарно пристанище</span></label> <select class="form-select" id="originPort"
                                                                                required="" th:field="*{originPort}">
                <option value="">Избери товарно пристанище</option>
                <option value="New York">New York</option>
                <option value="Savannah">Savannah</option>
                <option value="Miami">Miami</option>
                <option value="Indianapolis">Indianapolis</option>
                <option value="Houston">Houston</option>
                <option value="Los Angeles">Los Angeles</option>
                <option value="San Francisco">San Francisco</option>
            </select>
                <div class="invalid-feedback">Избери товарно пристанище.</div>
            </div>
            <div class="col-md-6"><label class="form-label" for="destinationPort"><span class="highlight">Разтоварно пристанище</span></label>
                <select class="form-select" id="destinationPort" required="" th:field="*{destinationPort}">
                    <option value="">Избери разтоварно пристанище</option>
                    <option value="Rotterdam">Rotterdam</option>
                    <option value="Varna">Varna</option>
                </select>
                <div class="invalid-feedback">Избери разтоварно пристанище.</div>
            </div>
            <div class="col-md-6"><label class="form-label" for="vehicleType"><span
                    class="highlight">Вид МПС</span></label> <select class="form-select" id="vehicleType" required=""
                                                                     th:field="*{vehicleType}">
                <option value="">Избери вид МПС</option>
                <option value="CAR">CAR</option>
                <option value="SUV">SUV</option>
                <option value="Large SUV">Large SUV</option>
                <option value="PICKUP">PICKUP</option>
                <option value="Motorcycle">Motorcycle</option>
            </select>
                <div class="invalid-feedback">Избери тип МПС.</div>
            </div>
            <div class="col-md-3 d-flex align-items-center">
                <div class="form-check"><input class="form-check-input" id="hybrid" th:field="*{hybrid}"
                                               type="checkbox"/> <label class="form-check-label" for="hybrid">⚡
                    Хибрид</label></div>
            </div>
            <div class="col-md-3 d-flex align-items-center">
                <div class="form-check"><input class="form-check-input" id="electric" th:field="*{electric}"
                                               type="checkbox"/> <label class="form-check-label" for="electric">🔋
                    Електрически</label></div>
            </div>
            <div class="col-md-6"><label class="form-label" for="price"><span
                    class="highlight">Цена на автомобила (USD)</span></label> <input class="form-control" id="price"
                                                                                     min="1"
                                                                                     placeholder="Въведи числова стойност над 0."
                                                                                     required="" th:field="*{price}"
                                                                                     type="number"/>
                <div class="invalid-feedback">Моля, въведи цена.</div>
            </div>
            <div class="col-12 text-center mt-2">
                <button class="btn" type="submit">Изчисли</button>
            </div>
        </form>         <!-- Резултати -->
        <div class="row mt-5" id="results" th:if="${oceanFreight != null and oceanFreight != -1}">
            <div class="col-md-6"><h5 class="mb-3">🚚 Транспортни разходи</h5>
                <div class="alert alert-danger" th:if="${result == -1}"> Няма намерена цена за зададените параметри.
                </div>
                <div class="alert alert-success" th:if="${oceanFreight != null and oceanFreight != -1}"> Морски
                    транспорт: <strong th:text="${#numbers.formatDecimal(oceanFreight, 2, 2)}">0.00</strong> USD
                </div>
                <div class="alert alert-success"
                     th:if="${terminalHandling != null and terminalHandling != -1 and request.destinationPort == 'Rotterdam'}">
                    Терминални разходи в Ротердам: <strong th:text="${#numbers.formatDecimal(terminalHandling, 2, 2)}">0.00</strong>
                    EUR
                </div>
                <div class="alert alert-success"
                     th:if="${terminalHandling != null and terminalHandling != -1 and request.destinationPort == 'Varna'}">
                    Терминални разходи във Варна: <strong th:text="${#numbers.formatDecimal(terminalHandling, 2, 2)}">0.00</strong>
                    EUR
                </div>
                <div class="alert alert-success"
                     th:if="${domesticRotterdam != null &amp;&amp; domesticRotterdam != -1 &amp;&amp; request.destinationPort == 'Rotterdam'}">
                    Транспорт от Ротердам до София: <strong
                        th:text="${#numbers.formatDecimal(domesticRotterdam, 2, 2)}">0.00</strong> EUR
                </div>
            </div>
            <div class="col-md-6"><h5 class="mb-3">💰 Митнически задължения</h5>
                <div class="alert alert-success"
                     th:if="${terminalHandling != null and terminalHandling != -1 and request.destinationPort == 'Rotterdam'}">
                    Мито 10% : <strong th:text="${#numbers.formatDecimal(vehicleTAX, 2, 2)}">0.00</strong> USD
                </div>
                <div class="alert alert-success"
                     th:if="${terminalHandling != null and terminalHandling != -1 and request.destinationPort == 'Rotterdam'}">
                    ДДС 21% : <strong th:text="${#numbers.formatDecimal(calculateVATNetherlands, 2, 2)}">0.00</strong>
                    USD
                </div>
                <div class="alert alert-success"
                     th:if="${terminalHandling != null and terminalHandling != -1 and request.destinationPort == 'Varna'}">
                    Мито 10% : <strong th:text="${#numbers.formatDecimal(vehicleTAX, 2, 2)}">0.00</strong> USD
                </div>
                <div class="alert alert-success"
                     th:if="${terminalHandling != null and terminalHandling != -1 and request.destinationPort == 'Varna'}">
                    ДДС 20% : <strong th:text="${#numbers.formatDecimal(calculateVATBulgaria, 2, 2)}">0.00</strong> USD
                </div>
            </div>
        </div>
        <div class="alert alert-warning mt-4" th:if="${oceanFreight != null and oceanFreight != -1}"><strong>⚠️
            Важно:</strong> Митническите задължения се изчисляват спрямо митнически валутен курс. Калкулаторът дава
            ориентир.
        </div>
        <div class="alert alert-warning mt-3" th:if="${oceanFreight != null and oceanFreight != -1}"><strong>⚠️
            Важно:</strong> Всички транспортни разходи са без включено ДДС.
        </div>
    </div>
</section>
<footer class="site-footer">
    <div class="container py-4 text-center">
        <div class="d-flex justify-content-center gap-3 mb-3"><a class="btn-social instagram"
                                                                 href="https://www.instagram.com/easyimport.ba/"
                                                                 target="_blank"> <i class="bi bi-instagram"></i> </a>
            <a class="btn-social facebook" href="https://www.facebook.com/easyimportba" target="_blank"> <i
                    class="bi bi-facebook"></i> </a> <a class="btn-social linkedin"
                                                        href="https://www.linkedin.com/in/bozhidar-aladzhov-90003b186/"
                                                        target="_blank"> <i class="bi bi-linkedin"></i> </a> <a
                    class="btn-social discord" href="https://discord.gg/bwGDdFZddx" target="_blank"> <i
                    class="bi bi-discord"></i> </a> <a class="btn-social mail" href="mailto:easyimport.bg@gmail.com"> <i
                    class="bi bi-envelope-fill"></i> </a></div>
        <small class="text-muted-ux">© 2026 Bozhidar Aladzhov – Всички права запазени.</small></div>
</footer>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/tom-select/dist/js/tom-select.complete.min.js"></script>
<script>
         document.addEventListener('DOMContentLoaded', function(){       if(document.getElementById('originPort')) new TomSelect('#originPort', { create:false, sortField:null });       if(document.getElementById('destinationPort')) new TomSelect('#destinationPort', { create:false, sortField:null });       if(document.getElementById('vehicleType')) new TomSelect('#vehicleType', { create:false, sortField:null });        // Bootstrap validation       const forms = document.querySelectorAll('.needs-validation');       Array.prototype.slice.call(forms).forEach(function (form) {         form.addEventListener('submit', function (event) {           if (!form.checkValidity()) { event.preventDefault(); event.stopPropagation(); }           form.classList.add('was-validated');         }, false);       });     });
</script>
<script src="/js/reveal.js"></script>
</body>
</html>
